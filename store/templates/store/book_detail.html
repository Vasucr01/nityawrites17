{% extends 'store/base.html' %}
{% load static %}

{% block title %}{{ book.title }} - Nityawrites{% endblock %}

{% block seo_title %}{{ book.title }} by {{ book.author }} | Nityawrites{% endblock %}
{% block seo_description %}{{ book.description|truncatewords:25 }}{% endblock %}

{% block og_title %}{{ book.title }} - Buy Online at Nityawrites{% endblock %}
{% block og_description %}{{ book.description|truncatewords:20 }}{% endblock %}
{% if book.image %}
  {% block og_image %}{{ book.image.url }}{% endblock %}
{% endif %}

{% block extra_css %}
<!-- Structured Data for Google -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Book",
  "name": "{{ book.title }}",
  "author": {
    "@type": "Person",
    "name": "{{ book.author }}"
  },
  "description": "{{ book.description|truncatewords:50|escapejs }}",
  "image": "{{ request.scheme }}://{{ request.get_host }}{{ book.image.url }}",
  "offers": {
    "@type": "Offer",
    "price": "{{ book.price }}",
    "priceCurrency": "INR",
    "availability": "https://schema.org/{% if book.stock > 0 %}InStock{% else %}OutOfStock{% endif %}"
  }
}
</script>
{% endblock %}

{% block content %}
<!-- HERO -->
<section class="hero">
  <div class="hero-content">
    <h1>{{ book.title }}</h1>
    <p class="tagline">by {{ book.author }}</p>
    <p class="price">‚Çπ{{ book.price }}</p>
    {% if book.stock > 0 %}
      <a href="{% url 'cart_add' book.pk %}" class="btn">Add to Cart</a>
    {% else %}
      <p style="color: red; font-weight: bold;">Out of Stock</p>
    {% endif %}
  </div>
</section>

<!-- ABOUT -->
<section class="about">
  <h2>About The Book</h2>
  
  <div class="book-detail-grid">
    <div class="book-image">
      {% if book.image %}
        <img src="{{ book.image.url }}" alt="{{ book.title }}" style="width: 100%; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
      {% else %}
        <div style="width: 100%; height: 400px; background: linear-gradient(135deg, #f5f1ed, #e8dfd6); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #7a5c4d; font-size: 24px;">
          üìö {{ book.title }}
        </div>
      {% endif %}
    </div>
    
    <div class="book-info">
      <p style="line-height: 1.8; color: #333;">{{ book.description }}</p>
      <div style="margin-top: 20px;">
        <p><strong>Author:</strong> {{ book.author }}</p>
        <p><strong>Price:</strong> ‚Çπ{{ book.price }}</p>
        <p><strong>Stock:</strong> {{ book.stock }} available</p>
      </div>
      
      <div class="action-buttons" style="margin-top: 30px;">
        {% if book.stock > 0 %}
          <a href="{% url 'cart_add' book.pk %}" class="btn">Add to Cart</a>
        {% endif %}
        <a href="{% url 'home' %}" class="btn" style="background: #5e4438;">‚Üê Back to Books</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
