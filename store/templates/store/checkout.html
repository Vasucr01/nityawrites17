{% extends 'store/base.html' %}
{% load static %}

{% block title %}Checkout - Nityawrites{% endblock %}

{% block content %}
<section class="order" id="order">
  <h2>Checkout</h2>
  
  <!-- Order Summary -->
  <div style="max-width: 600px; margin: 0 auto 40px; padding: 20px; background: #f9f9f9; border-radius: 10px;">
    <h3>Order Summary</h3>
    {% for item in cart_items %}
    <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #ddd;">
      <span>{{ item.title }} (x{{ item.quantity }})</span>
      <span>₹{{ item.total }}</span>
    </div>
    {% endfor %}
    <div style="display: flex; justify-content: space-between; padding: 15px 0; font-weight: bold; font-size: 18px;">
      <span>Total:</span>
      <span>₹{{ total }}</span>
    </div>
  </div>

  <!-- Checkout Form -->
  <form method="post" action="{% url 'payment_process' %}">
    {% csrf_token %}
    
    <h3>Customer Details</h3>
    <input type="text" name="name" placeholder="Full Name" required minlength="2" maxlength="100" pattern="[A-Za-z\s]+" title="Please enter a valid name (letters and spaces only)">
    <input type="email" name="email" placeholder="Email" required maxlength="100">
    <input type="tel" name="phone" placeholder="Phone Number (10 digits)" required pattern="[0-9]{10}" minlength="10" maxlength="10" title="Please enter exactly 10 digits">
    
    <h3 style="margin-top: 30px;">Delivery Address</h3>
    <input type="text" name="address1" placeholder="Address Line 1" required minlength="10" maxlength="200" title="Address must be at least 10 characters">
    <input type="text" name="address2" placeholder="Address Line 2 (Optional)" maxlength="200">
    <input type="text" name="city" placeholder="City" required minlength="2" maxlength="50" pattern="[A-Za-z\s]+" title="Please enter a valid city name">
    <input type="text" name="state" placeholder="State" required minlength="2" maxlength="50" pattern="[A-Za-z\s]+" title="Please enter a valid state name">
    <input type="text" name="pincode" placeholder="Pincode (6 digits)" required pattern="[0-9]{6}" minlength="6" maxlength="6" title="Please enter exactly 6 digits">
    <input type="text" name="country" placeholder="Country" value="India" required minlength="2" maxlength="50">

    <button type="submit">Proceed to Payment</button>
  </form>
  
  <a href="{% url 'cart_detail' %}" class="btn" style="margin-top: 20px; display: inline-block; background: #5e4438;">← Back to Cart</a>
</section>
{% endblock %}
