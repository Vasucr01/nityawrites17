{% extends 'store/base.html' %}
{% load static %}

{% block title %}Payment - Nityawrites{% endblock %}

{% block content %}
<section class="payment">
  <h2>Complete Your Payment</h2>
  
  <div style="max-width: 600px; margin: 0 auto; padding: 30px; background: #f9f9f9; border-radius: 10px;">
    <div style="text-align: center; margin-bottom: 30px;">
      <h3>Order ID: {{ order.order_id }}</h3>
      <p style="font-size: 28px; font-weight: bold; color: #7a5c4d; margin: 20px 0;">â‚¹{{ total }}</p>
      <p style="font-size: 14px; color: #666;">Pay to: <strong>{{ upi_id_debug }}</strong></p>
    </div>
    
    <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
      <h4 style="margin-top: 0;">Order Summary</h4>
      {% for item in order.items.all %}
      <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
        <span>{{ item.book.title }} (x{{ item.quantity }})</span>
        <span>â‚¹{{ item.price }}</span>
      </div>
      {% endfor %}
    </div>
    
    <div style="text-align: center; margin: 30px 0;">
      <a href="{{ upi_link }}" class="btn" style="font-size: 18px; padding: 15px 40px; display: inline-block; text-decoration: none;">
        ðŸ’³ Pay via UPI
      </a>
      <p style="color: #666; margin-top: 15px; font-size: 14px;">
        Click the button above to open your UPI app<br>
        (Google Pay, PhonePe, Paytm, BHIM, etc.)
      </p>
    </div>
    
    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107; margin: 20px 0;">
      <p style="margin: 0; font-size: 14px;">
        <strong>After completing payment:</strong><br>
        Please enter your UPI Transaction ID below to confirm your order.
      </p>
    </div>
    
    <form method="post" action="{% url 'payment_callback' %}" style="margin-top: 30px;">
      {% csrf_token %}
      <label for="upi_transaction_id" style="display: block; margin-bottom: 10px; font-weight: bold;">
        UPI Transaction ID / Reference ID: <span style="color: red;">*</span>
      </label>
      <input 
        type="text" 
        id="upi_transaction_id" 
        name="upi_transaction_id" 
        placeholder="Enter your UPI Transaction ID" 
        required
        style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; margin-bottom: 15px;"
      >
      <p style="font-size: 12px; color: #666; margin-bottom: 20px;">
        You can find this in your UPI app's transaction history
      </p>
      <button type="submit" style="width: 100%; padding: 15px; background: #28a745; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer;">
        âœ“ Confirm Order
      </button>
    </form>
  </div>
</section>
{% endblock %}
